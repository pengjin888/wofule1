<!DOCTYPE html>
<!--suppress ALL-->
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script><!--引入jQuery-->
    <link rel="stylesheet" href="../../css/iframe.css">
<!--    <script src="../../js/jquery-3.5.1.min.js"></script>-->
<!--    <script src="../../js/bootstrap.min.js"></script>-->
    <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css"><!--引入bootstrap的css样式库-->
    <!--bootstrap是基于jQuery库的，所以应该先导入jQuery-->
    <script src="http://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"></script><!--引入bootstrap-->
<!--    <link rel="stylesheet" href="../../css/bootstrap.min.css">-->
</head>
<body style="width: 100%;height: 1999px">
<ul class="miaoindex" th:if="${map.startif}">
    <li class="sbs" th:each="info:${map.startif}">
        <h5 class="info_a" th:text="${info}"></h5>
        <h5 ></h5></li>
</ul>
<div id="left">《</div>
<ul class="miaoshali" th:if="${map.start}">
    <li class="miaoli" th:each="star:${map.start}">
        <ul class="miao">
            <li th:each="killgood:${star}">
                <img th:attr="src=${killgood.goodsimg}"
                     style='border-radius: 6px;width: 98%;height: 80%;float: left;margin: 1% 1%;position: relative;'>
<!--                <div style='border-radius: 6px;text-align: center;background-color: rgba(26,255,0,0.09);width: 100%;height: 14%;float: left;position: relative;'>-->
<!--                    品名：<a href='#' style='text-decoration: none;color: rgba(20,23,207,0.83);height: 100%;font-weight: 660;'-->
<!--                          th:text="${killgood.goodsname}"></a></div>-->
                <div class="miaoAa" th:if="${map.cus}" style="width: 100%;height: 20%;float: left;background-color: #d6e9c6">
                    <div >详情<img src="../../img/_/查看.png" height="40" width="40"/></div>
                    <div >收藏<img src="../../img/_/收藏.png" height="40" width="40"/></div>
<!--                    <div th:onclick="'miaoOrder('+${killgood.killid}+')'">-->
                    <div >
                        <a th:href="'miaoOrder?kiid='+${killgood.killid}" >
                            <img src="../../img/_/购买.png" height="40" width="40"/>
                        </a>
                    </div>
                </div>
                <div class="miaoAa" th:if="${#lists.isEmpty(map.cus)}" style="width: 100%;height: 20%;float: left;background-color: #d6e9c6">
                    <div style="width: 100%"><h4>登录才可以参与ฅ^>ﻌ<^ฅ 杀</h4></div>
                </div>
                <div class="miaogoodsif" style="width: 100%;height: 20%;float: left;background-color: #d6e9c6">
                    <div><h5 th:text="${'限量：'+killgood.killprice}+'件!'"></h5></div>
                    <div><h5><i><del th:text="${'原价：'+killgood.goodsprice}+'￥'"></del></i></h5></div>
                    <div><h5 th:text="${'限时：'+killgood.killprice}+'￥!'"></h5></div>
                </div>
            </li>
        </ul>
    </li>
</ul>
<div id="right">》</div>
<ii style="position: absolute;left: 10px;top:300px " >🔍：<i  th:text="${map.info}"></i><i th:if="${map.info==''}">搜点东西吧</i></ii>
<div style="font-size: 20px">
<!--    <div class="backto_top_btn">👈</div><div class="backto_top_btn">👉</div>-->
    <ul class="dataul" th:if="${not #lists.isEmpty(map.goods)}">
        <li th:each="good:${map.goods}">
            <img th:attr="src=${good.goodsimg}"
                 style='border-radius: 6px;width: 98%;height: 67%;float: left;margin: 1% 1%;position: relative;'>
            <div style='border-radius: 6px;text-align: center;background-color: rgba(26,255,0,0.09);width: 100%;height: 14%;float: left;position: relative;'>
                品名：<a href='#' style='text-decoration: none;color: rgba(20,23,207,0.83);height: 100%;font-weight: 660;'
                      th:text="${good.goodsname}"></a></div>
            <div style='border-radius: 6px;text-align: center;background-color: rgba(208,209,212,0.18);width: 98%;height: 15%;float: left;margin: 1%;position: relative;'>
                <div style='position:relative;color: rgba(203,24,24,0.82);width: 33%;height: 100%;float: left'
                     th:text="${good.goodscontent}" class="hid"></div>
                <div style='position:relative;color: rgb(255,1,1);font-weight: 600;width: 66%;height: 100%;float: left'
                     th:text="'单价：'+${good.goodsprice}" class="hid"></div>
                <div style='position:relative;display: none;font-weight: 400;color:red;width: 66%;height: 100%;float: left'
                     th:text="'库存：'+${good.goodsstock}" class="toshows"></div>
                <div style='position:relative;display: none;font-weight: 400;color:red;width: 33%;height: 100%;float: left'
                     class="toshows">
                    <a href="#">查看</a>
                    <div></div>
                </div>
            </div>
        </li>
    </ul>
</div>
<nav aria-label="Page navigation" style="margin:auto;width: 100%;">
    <div style="float: left;width: 14%;height: 100%"><h3 style="float: right;margin-right: 10%">点击翻页 </h3></div>
    <ul class="pagination" style="float: left;width: 50%;height: 100%">
        <li id="xx">
            <a th:href="${'page?info='+map.info+'&i='+map.fore}" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
            </a>
        </li>
        <li>
            <a th:href="${'page?info='+map.info+'&i='+map.next}" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
            </a>
        </li>
    </ul>
    <div style="float: left;width: 14%;height: 100%"><h3 style="float: right;margin-right: 10%">点我回到首页 </h3>
        <div class="backto_top_btn"
             style="display: flex;
            justify-content: center;
            align-items: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: #8c8c8c;
            font-size: 18px;
            box-shadow: 0 1px 3px rgba(26,26,26,0.24);
            opacity: 77%;">👆
        </div>
    </div>
</nav>
<!--<div  th:text="${map}"></div>-->
</body>
<script type="text/javascript">
    $(window).scroll(function () {
        if ($(window).scrollTop() > 100) {  // 当顶部的滚动距离大于500px时，显示返回顶部按钮
            $('.backto_top_btn').fadeIn(300);  // 给返回顶部按钮的显示隐藏加了一个简单的淡入淡出效果
        } else {
            $('.backto_top_btn').fadeOut(300);
        }
    })
    $(function () {
        $('body,html').animate({scrollTop: 290}, 270);
    })
    var nowtt;//获取当前时间
    var in2=  setInterval (function () {
        nowtt = new Date();
        $.each($(".info_a"),function (i,ee) {
            var e = $(ee)
            var xxs =parseInt(e.html());
            if (xxs<=nowtt.getHours() && (xxs+2)>nowtt.getHours()){
                e.next().html(  ":00场结束倒计时"+showtime(xxs+2));
            } else if (xxs>nowtt.getHours()){
                e.next().html(  ":00场开始倒计时"+showtime(xxs));
            } else if (xxs+2<=nowtt.getHours()){
                e.next().html( ":00场结束啦");
            }
        })
    },10)

    function showtime(xxxx){
        var thetime = new Date();
        thetime.setHours(xxxx)
        thetime.setMinutes(0)
        thetime.setSeconds(0)
        thetime.setMilliseconds(0)
        var nowtime = new Date();//获取当前时间
        // endtime = new Date("2020/9/13");  //定义结束时间
        var lefttime = thetime.getTime() - nowtime.getTime(),  //距离结束时间的毫秒数
            leftd = Math.floor(lefttime/(1000*60*60*24)),  //计算天数
            lefth = Math.floor(lefttime/(1000*60*60)%24),  //计算小时数
            leftm = Math.floor(lefttime/(1000*60)%60),  //计算分钟数
            lefts = Math.floor(lefttime/1000%60), //计算秒数
            leftms  = Math.floor(lefttime/(1000%60)%100);  //计算秒数
        return leftd + "天" + lefth + ":" + leftm + ":" + lefts+":"+leftms;  //返回倒计时的字符串
    }
    var btns = document.querySelectorAll('.sbs');
    var miaolis = document.querySelectorAll('.miaoli');
    for (var i = 0; i < btns.length; i++) {
        btns[i].onclick = function () {
            for (var i = 0; i < btns.length; i++) {
                btns[i].style.backgroundColor = ' rgba(23, 41, 30, 0.66)';
                btns[i].style.marginLeft = '-2px';
                btns[i].style.boxShadow = "";
            }
            this.style.backgroundColor = 'red';
            this.style.marginLeft = '2px';
            this.style.boxShadow = '2px 0 5px rgba(160, 0, 0, 0.6)';
        }
    }

    $('.backto_top_btn').click(function () {
        $('body,html').animate({scrollTop: 0}, 270); // 点击返回顶部按钮，文档在300ms内完成滚动到顶部
    });
    var lef = 50;
    $("#left").click(function () {
        lef+=330
        $(".miao").animate({left:lef},400)
    })
    $("#right").click(function () {
        lef-=330
        $(".miao").animate({left:lef},400)
    })
    $(".miaogoodsif").mouseover(function () {
        $(this).css("display","none")
        $(this).prev().css("display","block")
    })
    $(".miaoAa").mouseout(function () {
        $(this).css("display","none")
        $(this).next().css("display","block")
    })

    // $(".miaogoodsif").mouseover(function () {
    //     $(this).parent().animate({top:200},100)
    // })
    // $(".miaoAa").mouseout(function () {
    //     $(this).parent().animate({top:0},100)
    // })

    /*
    new Date(“month dd,yyyy hh:mm:ss”);
    new Date(“month dd,yyyy”);
    new Date(yyyy,mth,dd,hh,mm,ss);
    new Date(yyyy,mth,dd);
    new Date(ms);
    */

    // if (xxx<nowtt.getHours()&&xxx+2>nowtt.getHours()){
    //     $(e).next().html(":00场倒计时："+showtime(xxx+2))
    // } else if (xxx>nowtt.getHours()){
    //     var daa2 = new Date()
    //     $(e).next().html(":00场倒计时："+showtime(xxx))
    // } else if (xxx+2<nowtt.getHours()){
    //     $(e).next().html(":00场结束啦");
    // }
    function miaoOrder(id) {
        console.log(id);
        $.get("miaoOrder",{"kiid":id},function (data) {
            console.log(data)
            alert(data)
        },"json")
    }



</script>
</html>